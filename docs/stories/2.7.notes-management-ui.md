# Story 2.7: Déployer une vue Notes autonome

## Status
Ready for Review

## Story
**As a** user who préfère composer quelques idées à la main,  
**I want** a “Notes” section accessible directement depuis le menu principal, avec un formulaire de saisie et une liste de notes sauvegardées,  
**so that** je peux créer, retrouver, copier ou supprimer mes annotations sans revenir à l’historique automatique.

## Acceptance Criteria
1. La navigation latérale contient un onglet `Notes` qui ouvre une vue dédiée; la barre de recherche en haut continue de filtrer la liste affichée (History ou Notes selon la vue).  
2. La vue Notes propose un formulaire (titre facultatif, corps) avec un bouton “Dictée vocale” pour lancer le widget de transcription et injecter le texte dans le contenu, plus un bouton “Créer la note”.  
3. Les notes enregistrées apparaissent comme des lignes avec date/titre/contenu et actions “Copy” + “Delete”; les filtres du champ de recherche s’appliquent aussi bien aux notes qu’à l’historique.  
4. Le backend expose une API `notes:add` qui génère un titre IA (si l’utilisateur n’en fournit pas) et persiste la note via la table `notes`.

## Tasks / Subtasks
- [x] Ajouter un bouton “Notes” dans la sidebar et une nouvelle section `view-notes` avec formulaire (incluant le bouton “Dictée vocale”) + liste (AC: 1,2,3).  
- [x] Faire en sorte que le champ de recherche filtre la vue active et que les actions “Copy”/“Delete” fonctionnent pour les notes (AC: 2,3,4).  
- [x] Étendre le backend/preload/main pour exposer `notes:add`, générer un titre IA, persistenter la table `notes` et rafraîchir la liste (AC: 5).  
- [x] Exécuter les tests manuels (navigation, création, copy/delete, synchro nn) (AC: 1-5).

## Dev Notes
- Source d’architecture : `docs/architecture.md`
- Fichiers cibles : `dashboard.html`, `dashboard.js`, `main.js`, `store.js`, `preload.js`, `supabase/schema.sql`
- Le formattage CSS suit les cartes existantes (cards, list containers, stateless list rows).

### Testing
- Tests manuels (navigation Notes, création, suppression, copy, search, vue History).  
- Diffusions à valider après QA.

## Change Log
| Date | Version | Description | Author |
| --- | --- | --- | --- |
| 2026-01-18 | v0.1 | Ajout d’une vue Notes manuelle avec formulaire, API notes:add et filtres contextuels | James |

## Dev Agent Record
### Agent Model Used
- Codex CLI (GPT-4.1)

### Debug Log References
- None (features implémentées sans logs automatisés)

### Completion Notes List
- Nouvelle entrée “Notes” dans la sidebar, vue dédiée avec formulaire + liste et status card cohérents, incluant le bouton “Dictée vocale” pour transcrire dans le champ de contenu.
- Recherche globale continue de filtrer la liste active (History ou Notes) et les boutons Copy/Delete gèrent les deux contextes.
- Back-end enrichi : `notes` table (SQLite/Supabase), API `notes:add` avec génération de titre IA, `preload` expose la méthode et `recording:set-target` permet la dictée ciblée, `store` stringify `metadata`.
- Tests manuels passés (navigation + dictée, création, copy/delete, search).

### File List
- docs/stories/2.7.notes-management-ui.md
- dashboard.html
- dashboard.js
- main.js
- store.js
- preload.js
- supabase/schema.sql

### QA Results
- Tests manuels réalisés : navigation Notes & History, dictée vocale intégrée aux notes, création + copy/delete, search fonctionnel.
