# Journal des mini patchs

Ce fichier centralise les mini patchs appliques au projet (hotfix, micro-ajustements, correctifs rapides).

## Format d'entree
- Patch: 0.0.X (incrementer X a chaque mini patch)
- Date: YYYY-MM-DD
- Auteur: @nom
- Portee: UI | Backend | Infra | Docs | Tests | Build | Autre
- Resume: 1 phrase max
- Details: puces courtes
- Fichiers: liste des chemins
- Tests: commandes ou "non execute"
- Risques/Rollback: note courte si pertinent

### Modele
```
### 0.0.X - YYYY-MM-DD - @auteur
- Portee: UI | Backend | Infra | Docs | Tests | Build | Autre
- Resume: ...
- Details:
  - ...
- Fichiers:
  - ...
- Tests:
  - ...
- Risques/Rollback: ...
```

## Entrees

### 0.0.0 - YYYY-MM-DD - @auteur
- Portee: Docs
- Resume: Initialisation du journal des mini patchs
- Details:
  - Ajout de la structure de log
- Fichiers:
  - docs/stories/0.0.patch-logs.md
- Tests:
  - non execute
- Risques/Rollback: aucun

### 0.0.1 - 2026-01-24 - @james
- Portee: UI
- Resume: Remplacement du prompt lien par un modal interne dans l'editeur de notes
- Details:
  - Remplace window.prompt par openModal pour l'action "Lien"
  - Conserve le comportement require de selection de texte
- Fichiers:
  - dashboard.js
  - docs/stories/0.0.patch-logs.md
- Tests:
  - non execute
- Risques/Rollback: revert du block "link" dans applyFocusFormat

### 0.0.2 - 2026-01-24 - @james
- Portee: UI
- Resume: Restauration de la selection avant insertion du lien
- Details:
  - Sauvegarde la selection et la restaure apres le modal avant createLink
- Fichiers:
  - dashboard.js
  - docs/stories/0.0.patch-logs.md
- Tests:
  - non execute
- Risques/Rollback: retirer la restauration de selection dans applyFocusFormat

### 0.0.3 - 2026-01-24 - @james
- Portee: UI
- Resume: Ouverture des liens dans l'editeur de notes au clic
- Details:
  - Intercepte le clic sur <a> dans noteFocusEditor
  - Ouvre le lien via window.open pour passer par les guards externes
- Fichiers:
  - dashboard.js
  - docs/stories/0.0.patch-logs.md
- Tests:
  - non execute
- Risques/Rollback: retirer le handler click sur noteFocusEditor

### 0.0.4 - 2026-01-24 - @james
- Portee: UI
- Resume: Ouverture des liens sur double-clic + curseur pointeur
- Details:
  - Remplace le clic simple par double-clic pour ouvrir les liens
  - Ajout du curseur pointer sur les liens dans note-focus-editor
- Fichiers:
  - dashboard.js
  - dashboard.html
  - docs/stories/0.0.patch-logs.md
- Tests:
  - non execute
- Risques/Rollback: revenir au handler click et supprimer le style CSS

### 0.0.5 - 2026-01-24 - @james
- Portee: UI
- Resume: Retour a l'ouverture des liens au clic simple
- Details:
  - Remplace le double-clic par clic simple dans noteFocusEditor
- Fichiers:
  - dashboard.js
  - docs/stories/0.0.patch-logs.md
- Tests:
  - non execute
- Risques/Rollback: repasser en dblclick si besoin

### 0.0.5 - 2026-01-24 - @james
- Portee: UI
- Resume: Reduction de la fenetre d'undo d'annulation a 4 secondes
- Details:
  - Passe le timer d'annulation de 5000 ms a 4000 ms
- Fichiers:
  - renderer.js
  - docs/stories/0.0.patch-logs.md
- Tests:
  - non execute
- Risques/Rollback: remettre la constante CANCEL_UNDO_DURATION_MS a 5000

### 0.0.6 - 2026-01-24 - @james
- Portee: UI
- Resume: Garde l'espace entre menu et sous-menu sans fermeture intempestive
- Details:
  - Ajoute un pont de survol invisible pour traverser l'espace
  - Ne ferme plus le sous-menu si le curseur entre dans le panneau
- Fichiers:
  - index.html
  - renderer.js
  - docs/stories/0.0.patch-logs.md
- Tests:
  - non execute
- Risques/Rollback: retirer ::before sur .submenu-panel et revert la condition mouseleave

### 0.0.7 - 2026-01-24 - @james
- Portee: UI
- Resume: Enroule les noms de micro trop longs au lieu de les tronquer
- Details:
  - Ajoute un wrap par nombre de caracteres pour les libelles micro
  - Autorise les retours a la ligne pour les libelles et le micro actif
- Fichiers:
  - index.html
  - renderer.js
  - docs/stories/0.0.patch-logs.md
- Tests:
  - non execute
- Risques/Rollback: supprimer wrapLabel et remettre white-space a normal

### 0.0.8 - 2026-01-24 - @james
- Portee: UI
- Resume: Centre le texte du bouton "Creer un compte" dans le modal login
- Details:
  - Aligne les boutons d'actions auth en inline-flex centre
- Fichiers:
  - dashboard.html
  - docs/stories/0.0.patch-logs.md
- Tests:
  - non execute
- Risques/Rollback: retirer l'alignement inline-flex centré sur .auth-actions button

### 0.0.9 - 2026-01-24 - @james
- Portee: UI
- Resume: Rend l'arriere-plan du modal de note plus leger et transparent
- Details:
  - Allège le fond et le blur du backdrop quand le modal note est ouvert
- Fichiers:
  - dashboard.html
  - docs/stories/0.0.patch-logs.md
- Tests:
  - non execute
- Risques/Rollback: retirer la surcharge .modal-backdrop.notes-modal

### 0.0.10 - 2026-01-24 - @james
- Portee: UI
- Resume: Evite le rognage de la barre d'outils notes en bord de fenetre
- Details:
  - Clamp la position horizontale de la toolbar selon la largeur visible
- Fichiers:
  - dashboard.js
  - docs/stories/0.0.patch-logs.md
- Tests:
  - non execute
- Risques/Rollback: retirer le clamp dans positionFocusToolbar

### 0.0.11 - 2026-01-24 - @james
- Portee: UI
- Resume: Ameliore le style de la scrollbar dans les sous-menus du widget
- Details:
  - Ajoute un style de scrollbar plus discret pour les listes de sous-menu
- Fichiers:
  - index.html
  - docs/stories/0.0.patch-logs.md
- Tests:
  - non execute
- Risques/Rollback: retirer les styles scrollbar de .submenu-list

### 0.0.12 - 2026-01-24 - @james
- Portee: UI
- Resume: Rend l'overlay des notes plus transparent pour voir le dashboard
- Details:
  - Reduit l'opacite et le blur du fond pendant l'ouverture d'une note
- Fichiers:
  - dashboard.html
  - docs/stories/0.0.patch-logs.md
- Tests:
  - non execute
- Risques/Rollback: restaurer les valeurs d'opacite/blur de .note-focus-overlay

### 0.0.13 - 2026-01-24 - @james
- Portee: UI
- Resume: Ferme le menu widget au clic externe et garde l'icône en etat hover
- Details:
  - Ferme le menu sur clic gauche ou droit hors du menu
  - Applique le style hover a l'icône quand le menu est ouvert
- Fichiers:
  - index.html
  - renderer.js
  - docs/stories/0.0.patch-logs.md
- Tests:
  - non execute
- Risques/Rollback: retirer le clamp de pointerdown et les styles context-open

### 0.0.14 - 2026-01-24 - @james
- Portee: UI
- Resume: Ferme le menu widget quand la fenetre perd le focus
- Details:
  - Ferme le menu si clic hors de la fenetre (blur)
- Fichiers:
  - renderer.js
  - docs/stories/0.0.patch-logs.md
- Tests:
  - non execute
- Risques/Rollback: retirer le handler window.blur pour le menu

### 0.0.15 - 2026-01-24 - @james
- Portee: UI
- Resume: Remplace le menu tray natif par un overlay custom type FakeWispr
- Details:
  - Ajoute une fenetre tray-menu transparente pour capter les clics hors menu
  - Met a jour l'etat de l'icone tray quand le menu est ouvert (hover)
- Fichiers:
  - main.js
  - preload.js
  - tray-menu.html
  - tray-menu.js
  - docs/stories/0.0.patch-logs.md
- Tests:
  - non execute
- Risques/Rollback: revenir au popUpContextMenu natif et supprimer tray-menu.*

### 0.0.16 - 2026-01-31 - @codex
- Portee: UI | Backend
- Resume: Ajuste ponctuation, dictionnaire manuel, uploads locaux, listes dictees et libelles UI.
- Details:
  - Post-process + styles: ponctuation naturelle sans commandes vocales explicites.
  - Dictionnaire: filtre manuel (pas d'auto-learn), tracking visible et hint de correspondance exacte.
  - Listes: mise en forme des numeros dictees en listes numerotees.
  - Uploads: transcription locale prioritaire + fallback cloud, formats acceptes affiches.
  - Langue: widget affiche la langue et recherche, dashboard garde un input texte avec placeholder.
  - Widget: pill decale plus bas via WIDGET_BOTTOM_MARGIN.
- Fichiers:
  - main.js
  - store.js
  - dashboard.html
  - dashboard.js
  - index.html
  - renderer.js
  - docs/stories/0.0.patch-logs.md
- Tests:
  - non execute
- Risques/Rollback: revert des changements mentionnes si regressions UI/ASR.

### 0.0.17 - 2026-01-31 - @codex
- Portee: Backend
- Resume: Ajout du fuzzy matching pour dictionnaire et snippets.
- Details:
  - Dictionnaire: fuzzy sur mots uniques (min 6 chars, prefix 4, distance <= 0.4).
  - Snippets: fuzzy au debut de phrase (min 6 chars, prefix 3, distance <= 0.25).
- Fichiers:
  - store.js
  - main.js
  - docs/stories/0.0.patch-logs.md
- Tests:
  - non execute
- Risques/Rollback: revert des blocs fuzzy dans applyDictionaryEntries et applySnippets.
