# Epic 10 — Notifications Inbox

## Status
Ready for Review

## Story
**As a** user,
**I want** product notifications in an inbox and via OS alerts,
**so that** I stay informed without missing updates.

## Acceptance Criteria
1. Remote notifications are fetched and stored locally with read/archived states.
2. Local OS notifications are shown for high-priority events.
3. Users can disable notifications globally and per type.
4. Notifications never include sensitive transcript content by default.
5. Inbox supports a retention window (default: 30 days) and purge old items.

## Tasks / Subtasks
- [x] Add local notifications inbox UI (AC: 1,3)
- [x] Add remote notifications storage and sync (AC: 1)
- [x] Add OS notification integration with opt-out (AC: 2,3)
- [x] Ensure notification payloads avoid sensitive content (AC: 4)
- [x] Add retention policy and purge job (AC: 5)

## Dev Notes
- Notifications can use Supabase table or a lightweight backend endpoint.
- Keep retention window configurable.
- Store notification types explicitly to enable per-type toggles.

### Testing
- Manual: send test notifications, mark read/archived, toggle opt-out.

## Change Log
| Date | Version | Description | Author |
| --- | --- | --- | --- |
| 2026-01-24 | v0.1 | New story for notifications inbox | PO |

## Dev Agent Record
### Agent Model Used
GPT-5.2-Codex

### Debug Log References
N/A

### Completion Notes List
- Added notifications store, remote refresh, OS alert hook, and retention policy.
- Built inbox UI with read/archive state and global/type mute settings.

### File List
- main.js
- store.js
- dashboard.js
- dashboard.html
- preload.js

## QA Results

### Review Date: 2026-02-01

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment
Review based on story documentation and file list (main.js, store.js, dashboard.js, dashboard.html, preload.js). Manual verification is noted; automated QA execution not recorded. Notifications inbox with read/archive and opt-out behavior.

### Refactoring Performed
None.

### Compliance Check
- Coding Standards: ✓ (per dev DoD; not re-verified in this pass; standards in docs/architecture/coding-standards.md)
- Project Structure: ✓ (file list confined to existing structure)
- Testing Strategy: ✗ (manual verification only; no automated coverage observed)
- All ACs Met: ✓ (per dev notes; not independently verified)

### Improvements Checklist

- [ ] Add tests for read/archive persistence and state transitions.
- [ ] Add tests for opt-out behavior and defaults.
- [ ] Add offline/startup regression tests.

### Security Review
No security-sensitive changes.

### Performance Considerations
Large inbox should remain responsive; verify.

### Files Modified During Review
None (QA artifacts only).

### Gate Status
Gate: CONCERNS -> docs/qa/gates/10.3-notifications-inbox.yml
Risk profile: Not run
NFR assessment: Not run

### Recommended Status
[✗ Changes Required - See unchecked items above]
(Story owner decides final status)
